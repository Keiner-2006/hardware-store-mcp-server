#!/usr/bin/env node\nimport { McpServer } from \"@modelcontextprotocol/sdk/server/mcp.js\";\nimport { StdioServerTransport } from \"@modelcontextprotocol/sdk/server/stdio.js\";\nimport { z } from \"zod\";\n\n// Importación de tus herramientas\nimport { obtenerProductosTool, obtenerProductoPorIdTool } from \"./tools/inventory.tools.js\";\nimport { obtenerPedidosTool, obtenerPedidoPorIdTool, obtenerVentasTool } from \"./tools/sales.tools.js\";\n\n// 1. Crear el servidor\nconst server = new McpServer({\n    name: \"ferreteria-mcp-server\",\n    version: \"1.1.0\",\n});\n\n// 2. Definir las herramientas usando registerTool\n\n// Obtener todos los productos\nserver.registerTool(\n    \"obtenerProductos\",\n    {\n        description: \"Obtiene la lista completa de productos del inventario de la ferretería.\",\n        inputSchema: z.object({}), // No requiere parámetros\n    },\n    async () => {\n        const result = await obtenerProductosTool.handler({});\n        return {\n            content: [{ type: \"text\", text: JSON.stringify(result, null, 2) }]\n        };\n    }\n);\n\n// Obtener producto por ID\nserver.registerTool(\n    \"obtenerProductoPorId\",\n    {\n        description: \"Busca un producto específico mediante su ID único.\",\n        inputSchema: z.object({\n            id: z.number().describe(\"El ID del producto (número entero)\")\n        }),\n    },\n    async ({ id }) => {\n        const result = await obtenerProductoPorIdTool.handler({ id });\n        return {\n            content: [{ type: \"text\", text: JSON.stringify(result, null, 2) }]\n        };\n    }\n);\n\n// Obtener todos los pedidos\nserver.registerTool(\n    \"obtenerPedidos\",\n    {\n        description: \"Lista todos los pedidos realizados en la ferretería.\",\n        inputSchema: z.object({}),\n    },\n    async () => {\n        const result = await obtenerPedidosTool.handler();\n        return {\n            content: [{ type: \"text\", text: JSON.stringify(result, null, 2) }]\n        };\n    }\n);\n\n// Obtener pedido por ID\nserver.registerTool(\n    \"obtenerPedidoPorId\",\n    {\n        description: \"Obtiene los detalles de un pedido específico usando su ID.\",\n        inputSchema: z.object({\n            id: z.number().describe(\"El ID del pedido (número entero)\")\n        }),\n    },\n    async ({ id }) => {\n        const result = await obtenerPedidoPorIdTool.handler({ id });\n        return {\n            content: [{ type: \"text\", text: JSON.stringify(result, null, 2) }]\n        };\n    }\n);\n\n// Obtener historial de ventas\nserver.registerTool(\n    \"obtenerVentas\",\n    {\n        description: \"Muestra el registro histórico de todas las ventas completadas.\",\n        inputSchema: z.object({}),\n    },\n    async () => {\n        const result = await obtenerVentasTool.handler();\n        return {\n            content: [{ type: \"text\", text: JSON.stringify(result, null, 2) }]\n        };\n    }\n);\n\n// 3. Escuchar las conexiones\nconst transport = new StdioServerTransport();\nawait server.connect(transport);\n